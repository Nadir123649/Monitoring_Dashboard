<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Transactions Dashboard</title>
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/highcharts-3d.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="p-8 font-sans text-gray-800 bg-gray-50">
  <div class="mx-auto max-w-7xl">
    <div class="flex flex-col items-start justify-between mb-6 md:flex-row md:items-center">
      <div>
        <h1 class="text-2xl font-bold text-gray-800">Transactions</h1>
        <p class="text-gray-500">Monitoring and analysis of transactions</p>
      </div>
      <div class="flex items-center space-x-2">
        <span class="text-sm text-gray-600">Define Time Period:</span>
        <input type="date" class="px-2 py-1 text-sm border rounded" />
        <input type="date" class="px-2 py-1 text-sm border rounded" />
      </div>
    </div>

    <!-- Tabs -->
    <div class="flex mb-6 space-x-4 border-b border-gray-200">
      <button id="tab-success"
        class="px-4 py-2 text-sm font-medium text-blue-600 border-b-2 border-blue-600 tab-btn">Success Rate</button>
      <button id="tab-monitoring"
        class="px-4 py-2 text-sm font-medium text-gray-500 tab-btn hover:text-blue-600">Transactions Monitoring</button>
    </div>

    <!-- Stats -->
    <div class="grid grid-cols-1 gap-6 mb-6 md:grid-cols-2">
      <div class="p-5 bg-white rounded shadow">
        <h3 class="mb-1 text-sm font-semibold" id="stat-title-1">Average Response Time per Transaction</h3>
        <div class="text-xl font-bold" id="stat-value-1">186 sec</div>
        <div class="text-sm text-gray-500" id="stat-target-1">vs 360 sec</div>
        <div class="flex justify-between mt-4 text-xs text-gray-500">
          <span>Current</span><span>Target</span>
        </div>
        <div class="h-2 overflow-hidden bg-blue-100 rounded">
          <div id="progress-1" class="h-full bg-blue-500" style="width: 52%;"></div>
        </div>
      </div>
      <div class="p-5 bg-white rounded shadow">
        <h3 class="mb-1 text-sm font-semibold" id="stat-title-2">% Response Time vs SLA</h3>
        <div class="text-xl font-bold" id="stat-value-2">55%</div>
        <div class="text-sm text-gray-500" id="stat-target-2">vs 85%</div>
        <div class="flex justify-between mt-4 text-xs text-gray-500">
          <span>Current</span><span>Target</span>
        </div>
        <div class="h-2 overflow-hidden bg-orange-100 rounded">
          <div id="progress-2" class="h-full bg-orange-500" style="width: 55%;"></div>
        </div>
      </div>
    </div>

    <!-- Charts -->
    <div class="grid grid-cols-1 gap-6 lg:grid-cols-2">
      <div class="bg-white p-6 rounded-xl shadow min-h-[350px]">
        <div id="chart1"></div>
      </div>
      <div class="bg-white p-6 rounded-xl shadow min-h-[350px]">
        <div id="chart2"></div>
      </div>
    </div>
  </div>

  <script>
    const chartData = {
      "success": {
        stat1: { title: "Average Response Time per Transaction", value: "186 sec", target: "vs 360 sec", progress: 52 },
        stat2: { title: "% Response Time vs SLA", value: "55%", target: "vs 85%", progress: 55 },
        chart1: {
          title: "Response Time Distribution",
          categories: ["Between 0 And 5 Minutes", "Between 5 And 6 Minutes", "Between 6 And 7 Minutes", "Between 7 And 10 Minutes", "More than 10 Minutes"],
          data: [84.47, 7.23, 3.25, 3.55, 1.5],
          colors: ["#2196F3", "#4CAF50", "#FF9800", "#FF9800", "#F44336"]
        },
        chart2: {
          title: "Document Types",
          categories: ["Tax Document", "Passport", "Police ID", "Student ID", "Military ID"],
          data: [3134, 3434, 23946, 39, 243],
          colors: ["#2196F3", "#4CAF50", "#FF9800", "#9E9E9E", "#F44336"]
        }
      },
      "monitoring": {
        stat1: { title: "Avg Txn Time", value: "152 sec", target: "vs 320 sec", progress: 65 },
        stat2: { title: "% SLA Hit", value: "63%", target: "vs 90%", progress: 63 },
        chart1: {
          title: "Updated Time Distribution",
          categories: ["< 5min", "5-10min", "10-15min", "15-20min", "> 20min"],
          data: [72, 18, 5, 3, 2],
          colors: ["#0284C7", "#10B981", "#F59E0B", "#F59E0B", "#EF4444"]
        },
        chart2: {
          title: "Updated Document Stats",
          categories: ["License", "Utility Bill", "Driving ID", "NADRA Card", "School ID"],
          data: [2534, 4134, 17450, 139, 543],
          colors: ["#0284C7", "#10B981", "#F59E0B", "#9CA3AF", "#EF4444"]
        }
      }
    };

    let chart1, chart2;

    function renderCharts(tabKey) {
      const d = chartData[tabKey];

      // Update stats
      document.getElementById("stat-title-1").textContent = d.stat1.title;
      document.getElementById("stat-value-1").textContent = d.stat1.value;
      document.getElementById("stat-target-1").textContent = d.stat1.target;
      document.getElementById("progress-1").style.width = d.stat1.progress + "%";

      document.getElementById("stat-title-2").textContent = d.stat2.title;
      document.getElementById("stat-value-2").textContent = d.stat2.value;
      document.getElementById("stat-target-2").textContent = d.stat2.target;
      document.getElementById("progress-2").style.width = d.stat2.progress + "%";

      chart1.update({
        title: { text: d.chart1.title },
        xAxis: { categories: d.chart1.categories },
        series: [{ data: d.chart1.data.map((y, i) => ({ y, color: d.chart1.colors[i] })) }]
      });

      chart2.update({
        title: { text: d.chart2.title },
        xAxis: { categories: d.chart2.categories },
        series: [{ data: d.chart2.data.map((y, i) => ({ y, color: d.chart2.colors[i] })) }]
      });
    }

    document.getElementById("tab-success").addEventListener("click", () => {
      renderCharts("success");
      document.getElementById("tab-success").classList.add("text-blue-600", "border-b-2", "border-blue-600");
      document.getElementById("tab-monitoring").classList.remove("text-blue-600", "border-b-2", "border-blue-600");
    });

    document.getElementById("tab-monitoring").addEventListener("click", () => {
      renderCharts("monitoring");
      document.getElementById("tab-monitoring").classList.add("text-blue-600", "border-b-2", "border-blue-600");
      document.getElementById("tab-success").classList.remove("text-blue-600", "border-b-2", "border-blue-600");
    });

    document.addEventListener("DOMContentLoaded", () => {
      const chartOptions = (title, categories, data, colors) => ({
        chart: { type: 'bar', options3d: { enabled: true, alpha: 15, beta: 15, depth: 50 }, backgroundColor: 'transparent' },
        title: { text: title, align: 'left', style: { fontSize: '18px', fontWeight: 'bold' } },
        xAxis: { categories, labels: { style: { fontSize: '15px', color: '#64748b' } }, gridLineWidth: 1, gridLineColor: '#e5e7eb' },
        yAxis: { min: 0, title: { text: null }, labels: { style: { fontSize: '14px', color: '#64748b' } }, gridLineWidth: 1, gridLineColor: '#e5e7eb' },
        legend: { enabled: false },
        plotOptions: {
          bar: {
            depth: 40,
            groupZPadding: 10,
            grouping: false,
            dataLabels: {
              enabled: true,
              format: '{point.y}',
              style: { color: '#222', fontWeight: 'bold', fontSize: '15px' },
              align: 'right',
              inside: false
            }
          }
        },
        tooltip: { pointFormat: '<b>{point.y}</b>' },
        series: [{ data: data.map((y, i) => ({ y, color: colors[i] })) }]
      });

      chart1 = Highcharts.chart("chart1", chartOptions(
        chartData.success.chart1.title,
        chartData.success.chart1.categories,
        chartData.success.chart1.data,
        chartData.success.chart1.colors
      ));

      chart2 = Highcharts.chart("chart2", chartOptions(
        chartData.success.chart2.title,
        chartData.success.chart2.categories,
        chartData.success.chart2.data,
        chartData.success.chart2.colors
      ));
    });
  </script>
</body>

</html>